# COMANDOS LINUX 

## SALIDAS DE COMANDOS

```
... 2>/dev/null
```
El '>' operador redirige la salida normalmente a un archivo, pero puede ser a un dispositivo. 

Existen dos salidas cuando ejecutas un comando en linux:

* stdout: que es cuando pones un comando y recibes la respuesta que no es un error, tiene el valor de 1.
* stderr: que es cuando recibes un mensaje de error al poner un comando inexistente o sin un parametro, que tiene el valor de 2.

/dev/null es el dispositivo nulo, toma cualquier entrada que desee y la tira. Puede usarse para suprimir cualquier salida.

en el comando mencionado estamos botando la salida con error a la papelera para que ya no se muestre en consola.

&> file: redirige stdout y stderr al file donde & especifica 1 y 2.

## GREP

-oP [expresion regular]

```
cat nmap | grep -oP '\d{0,5}/tcp.*'
```

-v [expresion que no contenga]

```
cat nmap | grep -v udp
```

xargs [comando] : aplica un comando a lo ya filtrado, se termina con ';' si son mas de 2 comandos

```
cat nmap | xargs head -c 20; echo
```

con echo imprimimos y con head -c 20 le indicamos los primeros 20 caracteres del archivo nmap.

## COMANDO HEAD

sirve para mostrar una cierta cantidad de lineas o caracteres de un archivo de texto.

* -c: cantidad de caracteres.
* -n: cantidad de lineas.

```
head -n 10 namp
```

## uname -a

muestra informacion del nombre y version del kernel.
Si es una antigua se puede hacer una explotacion del kernel.

ultima version estable: 5.8.7 lanzada el 5 de septiembre de 2020.

## id

puedo ver que usuario soy y a que grupos pertenezco

```
id
```

## rutas relativas y absolutas

.. indica el directorio padre
. indica el directorio actual
/ indica el directorio raiz


## find

```
find [ruta]
 [\tipo de objeto a buscar] [-opciones] [qué buscar]
```
**tipos de objetos**

* -name: busca por nombre
* -empty: busca si esta vacio
* -perm: busca permisos
* -type: busca por tipo (f=file)
* -exec: ejecuta un comando

el tipo de objeto -perm tiene unas variantes:

-perm 777: busca archivos con permisos 777 exactos

-perm /752: busca archivos con alguno de los permisos (7 o 5 o 2).

-perm -752: busca archivos que tenga todos los permisos mencionados (7 y 5 y 2)


## PERMISOS SUID, sGID y Sticky Bit

Un permiso SUID sobre un archivo permite que el que lo ejecute va a tener los mismos permisos que el que creó el archivo. Esto es útil en algunas ocasiones, aunque hay que utilizarlo con cuidado, ya que puede acarrear problemas de seguridad

O sea si el usuario root crear o tiene permisos sobre un fichero o ejecutable y ese mismo fichero o ejecutable tiene permisos SUID yo puedo ejecutar ese archivo o ejecutable como root.

verificacion:

```
find / -perm -4000 2>/dev/null
```

un permiso SGID es lo mismo que SUID, pero a nivel de grupo. Esto es, todo archivo que tenga activo el SGID, al ser ejecutado, tendrás los privilegios del grupo al que pertenece.

verificacion:

```
find / -perm -2000 2>/dev/null
```

ambos permisos aparece a nivel nomenclatura con un 's' (wrx y s).

un permiso sticky bit significa que los elementos que hay en ese directorio solo pueden ser renombrados o borrados por su propietario o bien por root. El resto de usuarios que tengan permisos de lectura y escritura, los podrán leer y modificar, pero no borrar.

```
find / -perm -1000 2>/dev/null
```

este permiso aparece como un 't' a nivel nomenclatura.

