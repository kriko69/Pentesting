#!/bin/bash

#btengo la lista de procesos en tiempo real del sistema
old_process = $(ps -eo command)

#bucle infinito (paramos con ctrl+c)
while true; do

    #saco otra vez los procesos pero un poco mas actualizado
    new_process=$(ps -eo command)

    #hago un 'diff' para ver la diferencia entre los procesos
    # '>' es lo nuevo que se ejecuta (lo que es nuevo)
    # '<' es lo que ya no se ejecuta
    # filtramos para no muestre lo que tenga 'kworker' o parte del comando 'ps -eo command' en este caso 'command' y el nombre de nuestro fichero
    diff <(echo "$old_process") <(echo "new_process") | grep "[\>\<]" | grep -v -E "kworker|command|ponerNmbreDeEsteFichero"

    #actualizamos la variable para una nueva iteracion
    old_process=$new_process
done